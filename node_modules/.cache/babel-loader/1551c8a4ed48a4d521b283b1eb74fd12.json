{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\Hoc ReactJS\\\\wetravelfrontend\\\\src\\\\components\\\\Layout\\\\GoogleMapLayout\\\\index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from 'use-places-autocomplete';\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from '@reach/combobox';\nimport '@reach/combobox/styles.css';\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\nimport { memo, useState, useCallback } from 'react';\nimport './GoogleMapLayout.scss';\nimport { english, vietnamese } from '../../Languages/MoreInformationTour';\nimport SearchMap from '../../images/map-search.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction GoogleMapLayout(_ref) {\n  _s();\n\n  let {\n    languageSelected,\n    style,\n    tour,\n    setTour,\n    hadOnclick\n  } = _ref;\n  const txtSearch = languageSelected === 'EN' ? english.txtSearchAddress : vietnamese.txtSearchAddress;\n  const center = {\n    lat: tour.latitude,\n    lng: tour.longitude\n  };\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: \"AIzaSyBZDeLRK0328QFPaSs-OCk03bMUOHXaMys\",\n    libraries: [\"places\"]\n  });\n\n  const handleClickMap = latLng => {\n    setTour({ ...tour,\n      latitude: latLng.lat(),\n      longitude: latLng.lng()\n    });\n  };\n\n  const [map, setMap] = useState(null);\n  const onLoad = useCallback(function callback(map) {\n    const bounds = new window.google.maps.LatLngBounds(center);\n    map.fitBounds(bounds);\n    setMap(map);\n  }, []);\n  const onUnmount = useCallback(function callback(map) {\n    setMap(null);\n  }, []);\n  console.log(tour.latitude, tour.longitude);\n  return isLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: style,\n      center: center,\n      zoom: 15,\n      onLoad: onLoad,\n      onUnmount: onUnmount,\n      onClick: hadOnclick && (e => handleClickMap(e.latLng)),\n      children: /*#__PURE__*/_jsxDEV(Marker, {\n        position: {\n          lat: tour.latitude,\n          lng: tour.longitude\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PlacesAutoComplete, {\n      setTour: setTour,\n      tour: tour,\n      txtSearch: txtSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GoogleMapLayout, \"sc/DS85Udqb0HC94DVNruSImuio=\", false, function () {\n  return [useJsApiLoader];\n});\n\n_c = GoogleMapLayout;\n\nconst PlacesAutoComplete = _ref2 => {\n  _s2();\n\n  let {\n    setTour,\n    tour,\n    txtSearch\n  } = _ref2;\n  const [focus, setFocus] = useState(false);\n  const {\n    ready,\n    value,\n    setValue,\n    suggestions: {\n      status,\n      data\n    },\n    clearSuggestions\n  } = usePlacesAutocomplete();\n\n  const handleSelect = async address => {\n    setValue(address, false);\n    clearSuggestions();\n    const results = await getGeocode({\n      address\n    });\n    const {\n      lat,\n      lng\n    } = await getLatLng(results[0]);\n    setTour({ ...tour,\n      latitude: lat\n    });\n    setTour({ ...tour,\n      longitude: lng\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Combobox, {\n    onSelect: handleSelect,\n    className: \"combobox-maps\",\n    children: focus ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ComboboxInput, {\n        value: value,\n        onChange: e => setValue(e.target.value),\n        disabled: !ready,\n        className: \"combobox-input-maps\",\n        placeholder: txtSearch,\n        onBlur: value.length == 0 && (() => setFocus(!focus))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(ComboboxPopover, {\n        children: /*#__PURE__*/_jsxDEV(ComboboxList, {\n          children: status === 'OK' && data.map(_ref3 => {\n            let {\n              place_id,\n              description\n            } = _ref3;\n            return /*#__PURE__*/_jsxDEV(ComboboxOption, {\n              value: description\n            }, place_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-map-icon-back\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: SearchMap,\n        onClick: () => setFocus(!focus)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 12\n  }, this);\n};\n\n_s2(PlacesAutoComplete, \"oUnHX8r4yQnYZUcMOLgGF4I1qOY=\", false, function () {\n  return [usePlacesAutocomplete];\n});\n\n_c2 = PlacesAutoComplete;\nexport default _c3 = /*#__PURE__*/memo(GoogleMapLayout);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GoogleMapLayout\");\n$RefreshReg$(_c2, \"PlacesAutoComplete\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"names":["usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","GoogleMap","useJsApiLoader","Marker","memo","useState","useCallback","english","vietnamese","SearchMap","GoogleMapLayout","languageSelected","style","tour","setTour","hadOnclick","txtSearch","txtSearchAddress","center","lat","latitude","lng","longitude","isLoaded","id","googleMapsApiKey","libraries","handleClickMap","latLng","map","setMap","onLoad","callback","bounds","window","google","maps","LatLngBounds","fitBounds","onUnmount","console","log","e","PlacesAutoComplete","focus","setFocus","ready","value","setValue","suggestions","status","data","clearSuggestions","handleSelect","address","results","target","length","place_id","description"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/Layout/GoogleMapLayout/index.js"],"sourcesContent":["import usePlacesAutocomplete, { getGeocode, getLatLng } from 'use-places-autocomplete'\r\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from '@reach/combobox'\r\nimport '@reach/combobox/styles.css'\r\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\r\nimport { memo, useState, useCallback } from 'react'\r\nimport './GoogleMapLayout.scss'\r\nimport { english, vietnamese } from '../../Languages/MoreInformationTour';\r\nimport SearchMap from '../../images/map-search.png'\r\n\r\nfunction GoogleMapLayout({ languageSelected, style, tour, setTour, hadOnclick }) {\r\n    const txtSearch = (languageSelected === 'EN' ? english.txtSearchAddress : vietnamese.txtSearchAddress)\r\n\r\n    const center = {\r\n        lat: tour.latitude,\r\n        lng: tour.longitude\r\n    };\r\n\r\n    const { isLoaded } = useJsApiLoader({\r\n        id: 'google-map-script',\r\n        googleMapsApiKey: \"AIzaSyBZDeLRK0328QFPaSs-OCk03bMUOHXaMys\",\r\n        libraries: [\"places\"]\r\n    })\r\n\r\n    const handleClickMap = ((latLng) => {\r\n        setTour({ ...tour, latitude: latLng.lat(), longitude: latLng.lng() })\r\n    })\r\n\r\n    const [map, setMap] = useState(null)\r\n\r\n    const onLoad = useCallback(function callback(map) {\r\n        const bounds = new window.google.maps.LatLngBounds(center);\r\n        map.fitBounds(bounds);\r\n        setMap(map)\r\n    }, [])\r\n\r\n    const onUnmount = useCallback(function callback(map) {\r\n        setMap(null)\r\n    }, [])\r\n\r\n    console.log(tour.latitude, tour.longitude)\r\n\r\n    return (isLoaded &&\r\n        <div>\r\n            <GoogleMap\r\n                mapContainerStyle={style}\r\n                center={center}\r\n                zoom={15}\r\n                onLoad={onLoad}\r\n                onUnmount={onUnmount}\r\n                onClick={hadOnclick && ((e) => handleClickMap(e.latLng))}\r\n            >\r\n                <Marker position={{\r\n                    lat: tour.latitude,\r\n                    lng: tour.longitude\r\n                }} />\r\n            </GoogleMap>\r\n            <PlacesAutoComplete setTour={setTour} tour={tour} txtSearch={txtSearch} />\r\n        </div>\r\n    );\r\n}\r\n\r\nconst PlacesAutoComplete = ({ setTour, tour, txtSearch }) => {\r\n    const [focus, setFocus] = useState(false)\r\n\r\n    const {\r\n        ready,\r\n        value,\r\n        setValue,\r\n        suggestions: { status, data },\r\n        clearSuggestions\r\n    } = usePlacesAutocomplete()\r\n\r\n    const handleSelect = (async (address) => {\r\n        setValue(address, false)\r\n        clearSuggestions()\r\n\r\n        const results = await getGeocode({ address });\r\n        const { lat, lng } = await getLatLng(results[0])\r\n        setTour({ ...tour, latitude: lat })\r\n        setTour({ ...tour, longitude: lng })\r\n    })\r\n\r\n    return <Combobox onSelect={handleSelect} className='combobox-maps'>\r\n        {focus ? <><ComboboxInput value={value} onChange={e => setValue(e.target.value)} disabled={!ready}\r\n            className='combobox-input-maps' placeholder={txtSearch} onBlur={value.length == 0 && (() => setFocus(!focus))} />\r\n            <ComboboxPopover>\r\n                <ComboboxList>\r\n                    {status === 'OK' && data.map(({ place_id, description }) => (\r\n                        <ComboboxOption key={place_id} value={description} />\r\n                    ))\r\n                    }\r\n                </ComboboxList>\r\n            </ComboboxPopover>\r\n        </>\r\n            :\r\n            <div className='search-map-icon-back'>\r\n                <img src={SearchMap} onClick={() => setFocus(!focus)} />\r\n            </div>\r\n        }\r\n\r\n    </Combobox>\r\n}\r\n\r\nexport default memo(GoogleMapLayout)"],"mappings":"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"},"metadata":{},"sourceType":"module"}